<% layout('layouts/boilerplate') %>

	<% if (users && users.length> 0) { %>
		<section class="container d-flex flex-row my-2">
			<section class="container col-md-4">
				<% for( let user of users ) { %>
					<div class="mb-3 card chat_card" onclick="onUserSelected(this.innerText, this)">
						<div class="row">
							<div class="col-4">
								<img src="<%= (user.images.length != 0) ?
										user.images[0].circle :
										'../images/yuriy-mlcn-3MORfl6x1Yg-unsplash.jpg' %>" alt="..." class="img-fluid rounded-circle my-3 ms-3">
							</div>
							<div class="col-6 d-flex justify-content-start align-items-center">
								<h3 class="">
									<b><%= user.username %></b>
								</h3>
								<a href="/users/<%= user._id %>"><i class="bi bi-info-circle-fill text-dark small-icon mx-2 mb-3"></i></a>
							</div>
						</div>
					</div>
					<% } %>
			</section>
			<section class="container col-md-8 g-3 card chat p-3">
				<div class="container my-auto messages" id="messages"></div>
				<div class="container mt-3">
					<form action="" id="form">
						<div class="d-flex flex-row input-group">
							<input type="text" class="form-control" id="input" placeholder="Message..."
								aria-label="Recipient's username" aria-describedby="button-addon2" />
							<button class="btn btn-outline-secondary" id="button-addon2">Send</button>
						</div>
					</form>
				</div>
			</section>
		</section>
		<% } else { %>
			<section class="container d-flex justify-content-center">
				<div class="alert alert-light">
					<h3>WOW no chats. Go make <a href="/users/discover" class="alert-link">matches</a>.</h3>
				</div>
			</section>
			<% } %>

				<script src="/socket.io/socket.io.js"></script>
				<script src="/js/client.js"></script>